<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Products</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4">

  <div class="d-flex justify-content-between mb-3">
    <h2>Products as</h2>
    <a href="add.html" class="btn btn-primary">Add Product</a>
  </div>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Created At</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="productTable">
      <tr><td colspan="5" class="text-center">Loading...</td></tr>
    </tbody>
  </table>

<script>
  async function loadProducts() {
    try {
      const res = await fetch('/api/products');
      const products = await res.json();
      const tbody = document.getElementById('productTable');
      if (!products.length) {
        tbody.innerHTML = '<tr><td colspan="5" class="text-center">No products found.</td></tr>';
        return;
      }
      tbody.innerHTML = products.map(p => `
        <tr>
          <td>${p.name}</td>
          <td>â‚¹${p.price}</td>
          <td>${p.quantity}</td>
          <td>${new Date(p.createdAt).toLocaleString()}</td>
          <td>
            <a href="edit.html?id=${p._id}" class="btn btn-sm btn-warning">Edit</a>
            <a href="delete.html?id=${p._id}" class="btn btn-sm btn-danger">Delete</a>
          </td>
        </tr>
      `).join('');
    } catch (err) {
      console.error(err);
    }
  }
  loadProducts();
</script>

</body>
</html>
